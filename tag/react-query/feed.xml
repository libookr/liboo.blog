<?xml version="1.0" encoding="utf-8"?>

<feed xmlns="http://www.w3.org/2005/Atom" >
  <generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator>
  <link href="https://blog.liboo.kr/tag/react-query/feed.xml" rel="self" type="application/atom+xml" />
  <link href="https://blog.liboo.kr/" rel="alternate" type="text/html" />
  <updated>2025-01-13T03:37:14+00:00</updated>
  <id>https://blog.liboo.kr/tag/react-query/feed.xml</id>

  
  
  

  
    <title type="html">Liboo.blog | </title>
  

  
    <subtitle>ë¼ì´ë¶€ ê°œë°œ ë¸”ë¡œê·¸</subtitle>
  

  

  
    
      
    
      
    
      
    
      
    
      
    
  

  
  

  
    <entry>
      <title type="html">React-Queryë¡œ ì•ˆì •ì ì¸ ìŠ¤íŠ¸ë¦¬ë°ì„ ìœ„í•œ ë¡œë”© ë° ì—ëŸ¬ ê´€ë¦¬í•˜ê¸°</title>
      <link href="https://blog.liboo.kr/React-Query%EB%A1%9C_%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8_%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D%EC%9D%84_%EC%9C%84%ED%95%9C_%EB%A1%9C%EB%94%A9_%EB%B0%8F_%EC%97%90%EB%9F%AC_%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0" rel="alternate" type="text/html" title="React-Queryë¡œ ì•ˆì •ì ì¸ ìŠ¤íŠ¸ë¦¬ë°ì„ ìœ„í•œ ë¡œë”© ë° ì—ëŸ¬ ê´€ë¦¬í•˜ê¸°" />
      <published>2024-12-04T03:09:00+00:00</published>
      <updated>2024-12-04T03:09:00+00:00</updated>
      <id>https://blog.liboo.kr/React-Query%EB%A1%9C_%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8_%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D%EC%9D%84_%EC%9C%84%ED%95%9C_%EB%A1%9C%EB%94%A9_%EB%B0%8F_%EC%97%90%EB%9F%AC_%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0</id>
      <content type="html" xml:base="https://blog.liboo.kr/React-Query%EB%A1%9C_%EC%95%88%EC%A0%95%EC%A0%81%EC%9D%B8_%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D%EC%9D%84_%EC%9C%84%ED%95%9C_%EB%A1%9C%EB%94%A9_%EB%B0%8F_%EC%97%90%EB%9F%AC_%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0">&lt;h2 id=&quot;ë¬¸ì œ-ì¸ì‹&quot;&gt;ğŸš¨Â ë¬¸ì œ ì¸ì‹&lt;/h2&gt;

&lt;p&gt;HLSì˜ìƒì„ ë¹„ë™ê¸°ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°ê°ì˜ ë°©ì‹ìœ¼ë¡œ ë¡œë”© ë° ì—ëŸ¬ì²˜ë¦¬ë¥¼ ì²˜ë¦¬í–ˆê³ , ê·¸ ê²°ê³¼ ì¼ì • &lt;strong&gt;ì½”ë“œê°€ ì¤‘ë³µ&lt;/strong&gt;ë˜ì—ˆê³  &lt;strong&gt;ë¹„íš¨ìœ¨ì &lt;/strong&gt;ì´ì—ˆë‹¤. ì´ë¥¼ ì²´ê³„í™”í•˜ì—¬ ë¹„ë™ê¸°ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œì˜ ìƒí™©ì„ ì •ë¦¬í•  í•„ìš”ì„±ì´ ìˆì—ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ê¸°ì¡´ì˜ ì½”ë“œ&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
const MainLiveSection = ({ title, type }: MainLiveSectionProps) =&amp;gt; {
  const { data = [], isLoading, error } = useRecentLive();

  if (error) {
    return &amp;lt;div&amp;gt;ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.&amp;lt;/div&amp;gt;;
  }

  return (
    &amp;lt;MainSectionContainer&amp;gt;
      &amp;lt;MainSectionHeader&amp;gt;
        &amp;lt;p className=&quot;live_section_title&quot;&amp;gt;{title}&amp;lt;/p&amp;gt;
        &amp;lt;button className=&quot;live_section_button&quot;&amp;gt;ì „ì²´ë³´ê¸°&amp;lt;/button&amp;gt;
      &amp;lt;/MainSectionHeader&amp;gt;

      {isLoading &amp;amp;&amp;amp; &amp;lt;div&amp;gt;ë¡œë”© ì¤‘...&amp;lt;/div&amp;gt;}

      {data.length === 0 &amp;amp;&amp;amp; !isLoading &amp;amp;&amp;amp; &amp;lt;div&amp;gt;ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.&amp;lt;/div&amp;gt;}
				// ì½”ë“œ ìƒëµ
    &amp;lt;/MainSectionContainer&amp;gt;
  );
};

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìœ„ì™€ ê°™ì€ ì½”ë“œê°€ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ìˆì—ˆë‹¤. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isLoading&lt;/code&gt;ê³¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;error&lt;/code&gt;ì¼ë•Œ ê°ê° ì—°ì‚°ìì™€ ì¡°ê±´ë¬¸ì„ í†µí•´ì„œ ì²˜ë¦¬í–ˆì—ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;í•´ê²°-ê³¼ì •&quot;&gt;ğŸƒÂ í•´ê²° ê³¼ì •&lt;/h2&gt;

&lt;h3 id=&quot;ê´€ì‹¬ì‚¬ë¥¼-ë¶„ë¦¬í• -ê²ƒ&quot;&gt;ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•  ê²ƒ&lt;/h3&gt;

&lt;p&gt;ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ì„ ë Œë”ë§ë˜ëŠ” ê²ƒì—ë§Œ &lt;strong&gt;ì§‘ì¤‘&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§&lt;/li&gt;
  &lt;li&gt;ë Œë”ë§ ë¡œì§&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ë¡œë”©ê³¼ ì—ëŸ¬ì²˜ë¦¬ëŠ” í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ &lt;strong&gt;ê´€ì‹¬ì‚¬ì—ì„œ ë²—ì–´ë‚œë‹¤ê³  íŒë‹¨&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;â†’ ë¡œë”©ê³¼ ì—ëŸ¬ì²˜ë¦¬ ì—­í• ì„ &lt;strong&gt;ë¶€ëª¨(ì²˜ë¦¬í•´ì•¼í•  ë¶€ë¶„)&lt;/strong&gt;ë¡œ ìœ„ì„&lt;/p&gt;

&lt;h3 id=&quot;suspenseì²˜ë¦¬ë¥¼-ì™œ-í•´ì•¼í•˜ëŠ”ê°€ì—-ëŒ€í•œ-ì˜ë¬¸&quot;&gt;Suspenseì²˜ë¦¬ë¥¼ ì™œ í•´ì•¼í•˜ëŠ”ê°€ì— ëŒ€í•œ ì˜ë¬¸&lt;/h3&gt;

&lt;p&gt;ê¸°ì¡´ì— ê°„ë‹¨í•˜ê²Œ ë¡œë”©ì‹œì—ëŠ”&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
{isLoading &amp;amp;&amp;amp; &amp;lt;div&amp;gt;ë¡œë”© ì¤‘...&amp;lt;/div&amp;gt;}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ì™€ ê°™ì´ ë¹„ë™ê¸° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ê±¸ë¦¬ëŠ” ì‹œê°„ì— ëŒ€í•´ì„œ í¬ê²Œ ê³ ë¯¼í•˜ì§€ ì•Šì•˜ë‹¤. ë˜í•œ, ë‹¨ìˆœíˆ ì‚¬ìš©ì ê²½í—˜ì˜ í–¥ìƒì´ë¼ëŠ” ì´ìœ ë¡œ ë¡œë”©ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²ƒì´ë¼ íŒë‹¨í–ˆì§€ë§Œ ìµœì í™”ì™€ë„ ê´€ë ¨ì´ ìˆì—ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ë ˆì´ì•„ì›ƒ ì‹œí”„íŠ¸ (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Layout Shift&lt;/code&gt;)
    &lt;ul&gt;
      &lt;li&gt;ì›¹ í˜ì´ì§€ì˜ ìš”ì†Œë“¤ì´ ì˜ˆìƒì¹˜ ëª»í•˜ê²Œ ì´ë™í•˜ëŠ” í˜„ìƒ&lt;/li&gt;
      &lt;li&gt;ê¸°ì¡´ì— ê³„ì‚°ë˜ì—ˆë˜ Layoutì´ ë‹¤ì‹œ ê³„ì‚°ë˜ëŠ” ë¬¸ì œê°€ ìˆìŒ&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Layout Shift&lt;/code&gt; í˜„ìƒì´ ì¼ì–´ë‚˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ì„œ ë³´ì—¬ì¤˜ì•¼í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì™€ í¬ê¸°ê°€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Suspense&lt;/code&gt; fallbackì»´í¬ë„ŒíŠ¸ì— ë³´ë‚´ì£¼ê²Œ ë˜ë©´ Layoutì´ ë‹¤ì‹œ ê³„ì‚°ë˜ì§€ ì•Šì•„ì„œ &lt;strong&gt;ì‚¬ìš©ì ê²½í—˜&lt;/strong&gt;ê³¼ &lt;strong&gt;ìµœì í™”&lt;/strong&gt;ë¥¼ ë™ì‹œì— í•´ê²°í•  ìˆ˜ ìˆìŒ&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
&amp;lt;Suspense fallback={&amp;lt;RecommendLiveSkeleton /&amp;gt;}&amp;gt;
  &amp;lt;DataComponent /&amp;gt;
&amp;lt;/Suspense&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Suspenseì˜ fallbackì»´í¬ë„ŒíŠ¸ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;skeleton&lt;/code&gt;ì„ ì§ì ‘ ë§Œë“¤ì–´ì„œ ëŒ€ì‘&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;skeleton ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ ì •
    &lt;ul&gt;
      &lt;li&gt;react-loading-skeleton, react-skeleton-loader : ê°„ë‹¨í•˜ê³  ë¹ ë¥´ê²Œ ì ìš©&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;react-content-loader&lt;/code&gt;&lt;/strong&gt; : ë””ìì¸ì„ &lt;strong&gt;ì»¤ìŠ¤í„°ë§ˆì´ì§•&lt;/strong&gt; ê°€ëŠ¥ (svg ê¸°ë°˜)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ì´ˆê¸° ë¡œë”©í™”ë©´&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/upload/2024-12-04-React-Queryë¡œ_ì•ˆì •ì ì¸_ìŠ¤íŠ¸ë¦¬ë°ì„_ìœ„í•œ_ë¡œë”©_ë°_ì—ëŸ¬_ê´€ë¦¬í•˜ê¸°.md/0.png&quot; alt=&quot;0&quot; /&gt;&lt;em&gt;image.png&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ê°œì„  í›„&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/upload/2024-12-04-React-Queryë¡œ_ì•ˆì •ì ì¸_ìŠ¤íŠ¸ë¦¬ë°ì„_ìœ„í•œ_ë¡œë”©_ë°_ì—ëŸ¬_ê´€ë¦¬í•˜ê¸°.md/1.png&quot; alt=&quot;1&quot; /&gt;&lt;em&gt;%EC%97%90%EB%9F%AC%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8.gif&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ì¶”ê°€ë¡œ, ì›¹í˜ì´ì§€ì˜ ì„±ëŠ¥ì§€í‘œì¸ &lt;strong&gt;CLS(Cumulative Layout Shift)&lt;/strong&gt;ë¥¼ í†µí•´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Layout Shift&lt;/code&gt; ë¹ˆë„ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆìŒ&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wit.nts-corp.com/2020/12/28/6240&quot;&gt;https://wit.nts-corp.com/2020/12/28/6240&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;react-queryë¥¼-í™œìš©í•˜ì—¬-suspense-ì²˜ë¦¬í•˜ê¸°&quot;&gt;React-Queryë¥¼ í™œìš©í•˜ì—¬ Suspense ì²˜ë¦¬í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;React-Queryì˜ ë²„ì „ì´ ë‹¬ë¼ì§€ë©´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DefaultOptions&lt;/code&gt; ì†ì„±ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;suspense&lt;/code&gt; ì†ì„±ì´ ì œê±°ë¨&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/upload/2024-12-04-React-Queryë¡œ_ì•ˆì •ì ì¸_ìŠ¤íŠ¸ë¦¬ë°ì„_ìœ„í•œ_ë¡œë”©_ë°_ì—ëŸ¬_ê´€ë¦¬í•˜ê¸°.md/2.png&quot; alt=&quot;2&quot; /&gt;&lt;em&gt;image.png&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OmitKeyof&lt;/code&gt; ì†ì„±ì„ í†µí•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;suspense&lt;/code&gt;ê°€ ë¹ ì§„ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Suspense&lt;/code&gt;ë¥¼ ì§€ì›í•˜ëŠ” ìƒˆë¡œìš´ í›…ì´ ìˆì—ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;useSuspenseQuery&lt;/li&gt;
  &lt;li&gt;useSuspenseQueries&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ìœ„ì˜ suspenseQueryëŠ” ê¸°ì¡´ì˜ useQueryì˜ ê¸°ëŠ¥ì— Reactì˜ &lt;strong&gt;Suspenseë¥¼ ìë™ì ìœ¼ë¡œ ì§€ì›&lt;/strong&gt;í•´ì£¼ëŠ” í›…ì´ë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
export const useMainLive = () =&amp;gt; {
  return useSuspenseQuery&amp;lt;MainLive[], Error&amp;gt;({
    queryKey: [&apos;mainLive&apos;],
    queryFn: fetchMainLive,
    refetchOnWindowFocus: false,
  });
};

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;suspenseì™€-errorboundaryì˜-í†µí•©&quot;&gt;Suspenseì™€ ErrorBoundaryì˜ í†µí•©&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ErrorBoundary ë„ì…&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ ê´€ì‹¬ì‚¬ë¥¼ &lt;strong&gt;ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œ(ErrorBoundary) ìœ„ì„&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;ì—ëŸ¬ì‹œ ë³´ì—¬ì•¼ ì¤˜ì•¼ í•  ì»´í¬ë„ŒíŠ¸ í• ë‹¹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Suspense&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ErrorBoundary&lt;/code&gt;ë¥¼ &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AsyncBoundary&lt;/code&gt;&lt;/strong&gt;ë¼ëŠ” í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ &lt;strong&gt;í†µí•©&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;â†’ ë¹„ë™ê¸°Â &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Suspense&lt;/code&gt;Â ì»´í¬ë„ŒíŠ¸ì˜ ë¡œë”© ìƒíƒœì™€Â &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Error&lt;/code&gt;Â ìƒíƒœë¥¼ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.slash.page/ko/libraries/react/async-boundary/src/withAsyncBoundary.i18n&quot;&gt;https://www.slash.page/ko/libraries/react/async-boundary/src/withAsyncBoundary.i18n&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
&amp;lt;AsyncBoundary
  pendingFallback={&amp;lt;RecommendLiveSkeleton /&amp;gt;}
  rejectedFallback={(error) =&amp;gt; &amp;lt;RecommendLiveError error={error} /&amp;gt;}
&amp;gt;
  &amp;lt;RecommendLive /&amp;gt;
&amp;lt;/AsyncBoundary&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;ì¸ìê°’
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pendingFallback&lt;/code&gt; : ì»´í¬ë„ŒíŠ¸ ë¡œë”© ì‹œì— ë³´ì—¬ì•¼í•  ì»´í¬ë„ŒíŠ¸&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rejectedFallback&lt;/code&gt; : ì—ëŸ¬ì‹œì— ë³´ì—¬ì•¼í•  ì»´í¬ë„ŒíŠ¸&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ì¥ì 
    &lt;ul&gt;
      &lt;li&gt;êµ¬í˜„ì˜ í¸ë¦¬í•¨&lt;/li&gt;
      &lt;li&gt;ì¶”í›„ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;error&lt;/code&gt;ê°€ ë°œìƒí•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refetch&lt;/code&gt; ê°€ëŠ¥&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content>

      
      
      
      
      

      <author>
          <name>[&quot;í™ì°½í˜„&quot;]</name>
        
        
      </author>

      

      
        <category term="react-query" />
      

      
        <summary type="html">ğŸš¨Â ë¬¸ì œ ì¸ì‹</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">[React-Query] useQueryì†ì„± : Suspense</title>
      <link href="https://blog.liboo.kr/React-Query-_useQuery%EC%86%8D%EC%84%B1_-_Suspense" rel="alternate" type="text/html" title="[React-Query] useQueryì†ì„± : Suspense" />
      <published>2024-12-01T12:51:00+00:00</published>
      <updated>2024-12-01T12:51:00+00:00</updated>
      <id>https://blog.liboo.kr/%5BReact-Query%5D_useQuery%EC%86%8D%EC%84%B1_:_Suspense</id>
      <content type="html" xml:base="https://blog.liboo.kr/React-Query-_useQuery%EC%86%8D%EC%84%B1_-_Suspense">&lt;h2 id=&quot;ë¬¸ì œ-ìƒí™©&quot;&gt;ğŸš¨Â ë¬¸ì œ ìƒí™©&lt;/h2&gt;

&lt;h3 id=&quot;usequeryì—ì„œ-suspenseë¥¼-ì‚¬ìš©í•´ì•¼-í•˜ëŠ”-ìƒí™©&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useQuery&lt;/code&gt;ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Suspense&lt;/code&gt;ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ìƒí™©&lt;/h3&gt;

&lt;h2 id=&quot;ë¬¸ì œ-í•´ê²°&quot;&gt;âœ…Â ë¬¸ì œ í•´ê²°&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ê¸°ì¡´ì˜ ì½”ë“œ&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
const defaultOptions: DefaultOptions = {
  queries: {
    retry: 3,
    refetchOnMount: true,
    refetchOnReconnect: true,
    refetchOnWindowFocus: true,
    suspense: true,
  }
};

export const queryClient = new QueryClient({
  defaultOptions
});

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;queriesì— suspenseê°’ì„ booleanìœ¼ë¡œ ì„¤ì •í•´ì£¼ë©´ ë˜ì—ˆë˜ ê³¼ê±°ì™€ ë‹¤ë¥´ê²Œ í˜„ì¬ëŠ” ì œê³µí•˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OmitKeyof&lt;/code&gt;ë¥¼ í†µí•´ ë¹ ì ¸ë²„ë¦° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;suspense&lt;/code&gt;ì†ì„±&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/upload/2024-12-01-[React-Query]_useQueryì†ì„±_:_Suspense.md/0.png&quot; alt=&quot;0&quot; /&gt;&lt;em&gt;image.png&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;ìƒˆë¡œ-ìƒê¸´-í›…-usesuspensequery-ëŠ”-suspenseë¥¼-ì œê³µí•¨&quot;&gt;ìƒˆë¡œ ìƒê¸´ í›… &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useSuspenseQuery&lt;/code&gt;&lt;/strong&gt; ëŠ” suspenseë¥¼ ì œê³µí•¨&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;javascript
export const useMainLive = () =&amp;gt; {
  return useSuspenseQuery&amp;lt;MainLive[], Error&amp;gt;({
    queryKey: [&apos;mainLive&apos;],
    queryFn: fetchMainLive,
    refetchOnWindowFocus: false,
  });
};

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;gptë‚˜ ë¸”ë¡œê·¸ë¥¼ ì•„ë¬´ë¦¬ ì°¾ì•„ë„ ì•Œë ¤ì£¼ì§€ ì•Šì•˜ë˜ ì •ë³´ì˜€ë‹¤. ì•„ë§ˆ ìµœê·¼ì— ë°”ë€ ê²ƒ ê°™ë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;ê²°ë¡ &quot;&gt;ê²°ë¡ &lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useSuspenseQuery&lt;/code&gt;&lt;/strong&gt; í›…ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>[&quot;í™ì°½í˜„&quot;]</name>
        
        
      </author>

      

      
        <category term="react-query" />
      

      
        <summary type="html">ğŸš¨Â ë¬¸ì œ ìƒí™©</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">[React-Query] useQueryì†ì„± : onError</title>
      <link href="https://blog.liboo.kr/React-Query-_useQuery%EC%86%8D%EC%84%B1_-_onError" rel="alternate" type="text/html" title="[React-Query] useQueryì†ì„± : onError" />
      <published>2024-12-01T04:08:00+00:00</published>
      <updated>2024-12-01T04:08:00+00:00</updated>
      <id>https://blog.liboo.kr/%5BReact-Query%5D_useQuery%EC%86%8D%EC%84%B1_:_onError</id>
      <content type="html" xml:base="https://blog.liboo.kr/React-Query-_useQuery%EC%86%8D%EC%84%B1_-_onError">&lt;h2 id=&quot;ë¬¸ì œ-ìƒí™©&quot;&gt;ğŸš¨Â ë¬¸ì œ ìƒí™©&lt;/h2&gt;

&lt;h3 id=&quot;ì˜ëª»ëœ-idê°’ìœ¼ë¡œ-í˜ì´ì§€ë¥¼-ì ‘ê·¼í•˜ëŠ”-ê²½ìš°-ì±„íŒ…ì°½ì„-í¬í•¨í•œ-ëª¨ë“ -ì»´í¬ë„ŒíŠ¸ë¥¼-ê°€ë ¤ì•¼-í•˜ëŠ”-ìƒí™©&quot;&gt;ì˜ëª»ëœ Idê°’ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ì ‘ê·¼í•˜ëŠ” ê²½ìš° ì±„íŒ…ì°½ì„ í¬í•¨í•œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ë ¤ì•¼ í•˜ëŠ” ìƒí™©&lt;/h3&gt;

&lt;h2 id=&quot;í•´ê²°-ê³¼ì •&quot;&gt;ğŸƒÂ í•´ê²° ê³¼ì •&lt;/h2&gt;

&lt;p&gt;ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useQuery&lt;/code&gt;ì—ì„œ Error í•¸ë“¤ë§ì„ í•˜ê¸°ë¡œ ê²°ì •&lt;/p&gt;

&lt;p&gt;ì¼ë‹¨, ErrorBoundaryë¥¼ í™œìš©í•˜ì—¬ Errorì‹œ ë³´ì—¬ì¤˜ì•¼í•  ì»´í¬ë„ŒíŠ¸ ì„ ì •&lt;/p&gt;

&lt;h3 id=&quot;1ì°¨-í•´ê²°-ê³¼ì •&quot;&gt;1ì°¨ í•´ê²° ê³¼ì •&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;onError&lt;/code&gt;ëŠ” ë”ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ì†ì„±&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;throwOnError&lt;/code&gt;&lt;/strong&gt; ì‚¬ìš©&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
export const useClientLive = ({ liveId }: { liveId: string }) =&amp;gt; {
  return useQuery&amp;lt;ClientLiveResponse, Error&amp;gt;({
    queryKey: [&apos;clientLive&apos;],
    queryFn: () =&amp;gt; fetchLive({ liveId }),
    refetchOnWindowFocus: false,
    initialData: { info: {} as ClientLive },
    // onErrorëŠ” ë”ì´ìƒ ì œê³µí•˜ì§€ ì•ŠìŒ
    onError: (error: Error) =&amp;gt; {
      // ì—ëŸ¬ì½”ë“œ
    },
    throwOnError: true,
  });
};

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ë‹¤ì‹œ ìƒê°í•´ë³´ë‹ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClientView&lt;/code&gt;ì—ì„œ ì—ëŸ¬ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClientPage&lt;/code&gt;ì— ì ‘ê·¼í•˜ìë§ˆì ì£¼ì†Œì°½ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;ë¥¼ ë³´ê³  ìœ íš¨í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;ì¸ì§€ íŒë‹¨í•˜ëŠ” ê²ƒì´ ì˜³ì€ ê²ƒì„ì„ íŒë‹¨&lt;/p&gt;

&lt;p&gt;â†’ ê¸°ì¡´ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ErrorBoundary&lt;/code&gt;ë¥¼ ì‚­ì œí•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ErrorPage&lt;/code&gt;ë¡œ ë¼ìš°íŒ… í•˜ë„ë¡ ìˆ˜ì •&lt;/p&gt;

&lt;h3 id=&quot;2ì°¨-í•´ê²°-ê³¼ì •&quot;&gt;2ì°¨ í•´ê²° ê³¼ì •&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;liveId&lt;/code&gt; ê°’ì´ ì˜³ì§€ ì•Šì€ ê°’ì˜ ê²½ìš° ì—ëŸ¬&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://prod-files-secure.s3.us-west-2.amazonaws.com/ccf16174-2ad8-4e34-8ea6-9046cc60f199/605ffe33-fd6e-4ec4-9622-58401e9e6cab/20241201-1644-35.2177938.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;amp;X-Amz-Credential=AKIAT73L2G45FSPPWI6X%2F20241231%2Fus-west-2%2Fs3%2Faws4_request&amp;amp;X-Amz-Date=20241231T091941Z&amp;amp;X-Amz-Expires=3600&amp;amp;X-Amz-Signature=16493c115feb00c94581261f7040dc0613b6d3dc206c08de6f1f6b734ef59c98&amp;amp;X-Amz-SignedHeaders=host&amp;amp;x-id=GetObject&quot;&gt;20241201-1644-35.2177938.mp4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ì˜ìƒì—ëŠ” ê¸¸ê²Œ ë‹´ê¸°ì§€ ì•Šì•˜ì§€ë§Œ, ê²°ê³¼ë¥¼ ë°›ì•„ì˜¤ëŠ”ë° ê¹Œì§€ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¼&lt;/p&gt;

&lt;h3 id=&quot;queryê¸°ë³¸ê°’-ì„¤ì •ì´-retryê°€-3&quot;&gt;queryê¸°ë³¸ê°’ ì„¤ì •ì´ retryê°€ 3&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
const defaultOptions: DefaultOptions = {
  queries: {
    retry: 3,
    refetchOnMount: true,
    refetchOnReconnect: true,
    refetchOnWindowFocus: true
  }
};

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;retryê°’ì„ 0ìœ¼ë¡œ ìˆ˜ì •&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
export const useClientLive = ({ liveId }: { liveId: string }) =&amp;gt; {
  return useQuery&amp;lt;ClientLiveResponse, Error&amp;gt;({
    queryKey: [&apos;clientLive&apos;],
    queryFn: () =&amp;gt; fetchLive({ liveId }),
    refetchOnWindowFocus: false,
    initialData: { info: {} as ClientLive },
    throwonError: true,
    retry: 0,
  });
};

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ë¬¸ì œ-í•´ê²°&quot;&gt;âœ…Â ë¬¸ì œ í•´ê²°&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;ê³ ì°¨í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ClientPageë¥¼ ê°ì‹¸ê³  ìœ íš¨í•˜ì§€ ì•Šì€ idë¥¼ ê¸°ì… ì‹œì— errorPageë¡œ ì´ë™&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
function ClientPageComponent() {
  return (
    &amp;lt;&amp;gt;
      &amp;lt;Header /&amp;gt;
      &amp;lt;ClientContainer&amp;gt;
        &amp;lt;AsyncBoundary pendingFallback={&amp;lt;&amp;gt;&amp;lt;/&amp;gt;} rejectedFallback={() =&amp;gt; &amp;lt;PlayerStreamError /&amp;gt;}&amp;gt;
          &amp;lt;ClientView /&amp;gt;
          &amp;lt;ClientChatRoom /&amp;gt;
        &amp;lt;/AsyncBoundary&amp;gt;
      &amp;lt;/ClientContainer&amp;gt;
    &amp;lt;/&amp;gt;
  );
}

const ClientPage = withLiveExistCheck(ClientPageComponent);

export default ClientPage;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typescript
export default function withLiveExistCheck&amp;lt;P extends object&amp;gt;(WrappedComponent: ComponentType&amp;lt;P&amp;gt;) {
  return function WithLiveExistCheckComponent(props: P) {
    const { id: liveId } = useParams();
    const navigate = useNavigate();

    const { data: isLiveExistData } = useCheckLiveExist({ liveId: liveId as string });
    const isLiveExist = isLiveExistData?.existed;

    useEffect(() =&amp;gt; {
      if (!isLiveExist) {
        navigate(&apos;/error&apos;);
      }
    }, [isLiveExistData]);

    return &amp;lt;WrappedComponent {...props} /&amp;gt;;
  };
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content>

      
      
      
      
      

      <author>
          <name>[&quot;í™ì°½í˜„&quot;]</name>
        
        
      </author>

      

      
        <category term="react-query" />
      

      
        <summary type="html">ğŸš¨Â ë¬¸ì œ ìƒí™©</summary>
      

      
      
    </entry>
  
</feed>
