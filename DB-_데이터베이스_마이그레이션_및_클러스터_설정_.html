<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>[DB] 데이터베이스 마이그레이션 및 클러스터 설정 </title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="The professional publishing platform" />
<link rel="shortcut icon" href="https://blog.liboo.kr//assets/images/favicon.png" type="image/png" />
<link rel="canonical" href="https://blog.liboo.kr/DB-_%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98_%EB%B0%8F_%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0_%EC%84%A4%EC%A0%95_" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Liboo.blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="[DB] 데이터베이스 마이그레이션 및 클러스터 설정 " />
    <meta property="og:description" content="레디스 클러스터 설정 image.png Redis, MySQL 서비스에서 인스턴스로 마이그레이션하기 기존에는 레디스를 NCP 에서 제공하는 서비스 자체를 사용했기 때문에 굳이 할 필요가 없었지만 레디스 클러스터를 샤딩까지 포함해서 서비스로 빌리면 요금이 어마어마하게 들어가게 된다. Redis 요금표 ncp 서버 인스턴스는 사용하지 않고 꺼두면 비용이 절감되는 방식이기 때문에 Redis 서비스를 직접 쓰기보다 서버 인스턴스에서" />
    <meta property="og:url" content="https://blog.liboo.kr/DB-_%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98_%EB%B0%8F_%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0_%EC%84%A4%EC%A0%95_" />
    <meta property="og:image" content="https://blog.liboo.kr/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/0.png" />
    <meta property="article:publisher" content="https://www.facebook.com/ghost" />
    <meta property="article:author" content="https://www.facebook.com/ghost" />
    <meta property="article:published_time" content="2025-01-09T10:57:00+00:00" />
    <meta property="article:modified_time" content="2025-01-09T10:57:00+00:00" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[DB] 데이터베이스 마이그레이션 및 클러스터 설정 " />
    <meta name="twitter:description" content="레디스 클러스터 설정 image.png Redis, MySQL 서비스에서 인스턴스로 마이그레이션하기 기존에는 레디스를 NCP 에서 제공하는 서비스 자체를 사용했기 때문에 굳이 할 필요가 없었지만 레디스 클러스터를 샤딩까지 포함해서 서비스로 빌리면 요금이 어마어마하게 들어가게 된다. Redis 요금표 ncp 서버 인스턴스는 사용하지 않고 꺼두면 비용이 절감되는 방식이기 때문에 Redis 서비스를 직접 쓰기보다 서버 인스턴스에서" />
    <meta name="twitter:url" content="https://blog.liboo.kr/" />
    <meta name="twitter:image" content="https://blog.liboo.kr/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/0.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Liboo.blog" />
    <meta name="twitter:site" content="@tryghost" />
    <meta name="twitter:creator" content="@tryghost" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Liboo.blog",
        "logo": "https://blog.liboo.kr/assets/images/blog-icon.png"
    },
    "url": "https://blog.liboo.kr/DB-_%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98_%EB%B0%8F_%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0_%EC%84%A4%EC%A0%95_",
    "image": {
        "@type": "ImageObject",
        "url": "https://blog.liboo.kr/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/0.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.liboo.kr/DB-_%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98_%EB%B0%8F_%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0_%EC%84%A4%EC%A0%95_"
    },
    "description": "레디스 클러스터 설정 image.png Redis, MySQL 서비스에서 인스턴스로 마이그레이션하기 기존에는 레디스를 NCP 에서 제공하는 서비스 자체를 사용했기 때문에 굳이 할 필요가 없었지만 레디스 클러스터를 샤딩까지 포함해서 서비스로 빌리면 요금이 어마어마하게 들어가게 된다. Redis 요금표 ncp 서버 인스턴스는 사용하지 않고 꺼두면 비용이 절감되는 방식이기 때문에 Redis 서비스를 직접 쓰기보다 서버 인스턴스에서"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="[DB] 데이터베이스 마이그레이션 및 클러스터 설정 " href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://blog.liboo.kr/"><img src="/assets/images/blog-icon.png" alt="Liboo.blog" /></a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/getting-started/">Getting Started</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="https://ghost.org">Try Ghost</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link social-link-fb" href="https://facebook.com/ghost" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
</a>
            
            
                <a class="social-link social-link-tw" href="https://twitter.com/tryghost" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 9 January 2025"> 9 January 2025</time>
                    
                </section>
                <h1 class="post-full-title">[DB] 데이터베이스 마이그레이션 및 클러스터 설정 </h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/0.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h2 id="레디스-클러스터-설정">레디스 클러스터 설정</h2>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/0.png" alt="0" /><em>image.png</em></p>

<h1 id="redis-mysql-서비스에서-인스턴스로-마이그레이션하기">Redis, MySQL 서비스에서 인스턴스로 마이그레이션하기</h1>

<p>기존에는 레디스를 NCP 에서 제공하는 서비스 자체를 사용했기 때문에 굳이 할 필요가 없었지만 레디스 클러스터를 샤딩까지 포함해서 서비스로 빌리면 요금이 어마어마하게 들어가게 된다.</p>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/1.png" alt="1" /><em>Redis 요금표</em></p>

<p>ncp 서버 인스턴스는 사용하지 않고 꺼두면 비용이 절감되는 방식이기 때문에 Redis 서비스를 직접 쓰기보다 서버 인스턴스에서 올려서 사용하는것이 비용 측면에서 이점이 많을 것 같아서 사용하던 MySQL 과 Redis 를 내리고 전부 서버 인스턴스로 올리고 개발/리팩토링 하려고 한다.</p>

<h2 id="public-subnet-private-subnet">Public Subnet, Private Subnet</h2>

<p>Redis 나 MySQL 은 모두가 접근할 수 있는 Public 으로 접근가능하게 하기 보다는, Private Subnet 으로 관리하면서 같은 VPC 에 있는 인스턴스에서 접근하도록 하는 것이 보안에 훨씬 좋다.</p>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/2.png" alt="2" /><em>image.png</em></p>

<p>실제 서버들이 배포되는 public subnet 인 web22-subnet-all 과, Redis 와 MySQL 이 돌아갈 private subnet 으로 분리했다.</p>

<h2 id="ncp-인스턴스-생성">NCP 인스턴스 생성</h2>

<p>우선 새로운 NCP 인스턴스를 하나 생성했다.</p>

<p>현재는 가장 싼 단계로 하나를 생성하고, Redis 와 MySQL 을 하나의 인스턴스에 설치해서 운용할 계획이다.</p>

<p>이렇게되면 인스턴스 하나가 문제가 생기면 두 개의 DB가 전부 동작할 수 없다는 매우 큰 단점을 가지게 된다. 그렇기 때문에 나중에 반드시 DB 를 분리하는 것이 좋다.</p>

<p>지금은 인스턴스의 비용을 최소화하면서 리팩토링하고 싶어서 위와 같은 방식을 선택했다.</p>

<p>이후에는 위에서 만들어둔 private subnet 에 할당해주면 된다.</p>

<p>Private Subnet 이다보니까 외부와 통신이 아예 안되어야 하는데 신기하게 <code class="language-plaintext highlighter-rouge">sudo apt update</code> 같은 명령어가 동작했다.</p>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/3.png" alt="3" /><em>image.png</em></p>

<p>apt 저장소가 <a href="http://repo.ncloud.com/ubuntu">http://repo.ncloud.com/ubuntu</a> 로 되어있고 아마 이 주소는 내부망에 포함되는 모양이다.</p>

<p>내부망이 맞는지 한 번 확인해보자.</p>

<p><code class="language-plaintext highlighter-rouge">nslookup</code> <a href="http://repo.ncloud.com/"><code class="language-plaintext highlighter-rouge">repo.ncloud.com</code></a></p>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/4.png" alt="4" /><em>image.png</em></p>

<p>내부망(사설망) 이라면 <code class="language-plaintext highlighter-rouge">10.x.x.x</code>, <code class="language-plaintext highlighter-rouge">192.168.x.x</code>, <code class="language-plaintext highlighter-rouge">172.16.x.x~172.31.x.x</code>와 같은 <strong>사설 IP 대역이어야 하는데</strong> <a href="http://169.254.xxx.xxx/"><strong>169.254.xxx.xxx</strong></a> <strong>였다.</strong></p>

<p>그러면 <a href="http://169.254.xxx.xxx/">169.254.xxx.xxx</a> 는 무슨 대역인가 하니</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash
169.254.xxx.xxx 대역의 IP 주소는 **Link-Local Address(링크 로컬 주소)**라고 불리며, 
네트워크 설정 시 DHCP 서버를 통해 IP를 받지 못할 때 자동으로 할당되는 IP 주소입니다. 
AWS/NCP 환경에서는 이 IP 대역이 AWS/NCP 내부 시스템과의 통신을 위한 특수 주소로 사용되기도 합니다.

</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">ip route show</code> 로 라우팅을 확인해보면</p>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/5.png" alt="5" /><em>image.png</em></p>

<p>169.254.x.x via 192.168.1.1 dev eth0 … 와 같은 라우팅이 보인다.</p>

<p>169.254.169.53 은 eth0 인터페이스 를 통해서 간다.</p>

<p>이 링크 로컬 주소는 네트워크 장치 단에서 이루어진다.</p>

<p><code class="language-plaintext highlighter-rouge">curl</code> <a href="http://169.254.169.254/latest/meta-data/"><code class="language-plaintext highlighter-rouge">http://169.254.169.254/latest/meta-data/</code></a> 를 통해서 인스턴스 메타데이터도 볼 수가 있다.</p>

<p>당연하게도 외부로는 ping 이나 wget/curl 은 안된다.</p>

<p>자세한 내용은 ncp 가이드가 있다.</p>

<p><a href="https://guide.ncloud-docs.com/docs/linux-os-repository-check">https://guide.ncloud-docs.com/docs/linux-os-repository-check</a></p>

<h2 id="nat-gateway">NAT Gateway</h2>

<p>NCP 가 Repository 를 제공해주다보니 redis 를 설치할 수 있긴 하다. 대신 최신 버전은 없을 수도 있다.</p>

<p>만약 최신 버전이나 NCP Repository 에 없는 버전을 설치하고 싶다면 NAT Gateway 가 필요하다.</p>

<p>NCP 에서 NAT Gateway 를 사용하고 싶다면</p>

<ol>
  <li>NAT Gateway 용 Subnet 생성</li>
</ol>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/6.png" alt="6" /><em>image.png</em></p>

<ol>
  <li>NAT Gateway 생성</li>
</ol>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/7.png" alt="7" /><em>image.png</em></p>

<ol>
  <li>Private Subnet 에 Route Table 설정</li>
</ol>

<p><img src="/upload/2025-01-09-[DB]_데이터베이스_마이그레이션_및_클러스터_설정_.md/8.png" alt="8" /><em>image.png</em></p>

<p>을 통해서 Private Subnet 에 NAT 게이트웨이를 사용할 수 있다.</p>

<h2 id="redis-설치-및-redis-cluster">Redis 설치 및 Redis Cluster</h2>

<p>원하는 버전의 Redis 를 설치하고 난 후에는 Redis Cluster 설정을 해야한다.</p>

<p>일단은 redis master 3 대에 각각 레플리카를 1개씩 설정해보자.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash
port {PORT}
maxmemory {MAX_MEMORY}mb 
maxmemory-policy volatile-lru
cluster-enabled yes
cluster-config-file nodes.conf
cluster-node-timeout 5000
cluster-announce-ip {ip}
appendonly yes
bind 0.0.0.0

</code></pre></div></div>

<p>포트와 maxmemory 는 원하는대로 설정하면 된다.</p>

<p>maxmemory-policy 는 메모리를 비워줄 때 어떤 기준으로 비울지를 결정한다.</p>

<table>
  <thead>
    <tr>
      <th><strong>정책</strong></th>
      <th><strong>대상</strong></th>
      <th><strong>삭제 기준</strong></th>
      <th><strong>적합한 사용 사례</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">noeviction</code></td>
      <td>전체 키</td>
      <td>삭제하지 않음</td>
      <td>영구 데이터 저장</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">allkeys-lru</code></td>
      <td>전체 키</td>
      <td>LRU(오래 사용되지 않은 키)</td>
      <td>캐시 시스템</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">volatile-lru</code></td>
      <td>TTL 설정된 키</td>
      <td>LRU(오래 사용되지 않은 키)</td>
      <td>TTL 기반 캐시 시스템</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">allkeys-random</code></td>
      <td>전체 키</td>
      <td>랜덤</td>
      <td>데이터 접근 패턴이 불규칙할 때</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">volatile-random</code></td>
      <td>TTL 설정된 키</td>
      <td>랜덤</td>
      <td>TTL 기반 캐시에 랜덤 제거</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">volatile-ttl</code></td>
      <td>TTL 설정된 키</td>
      <td>TTL이 가장 짧은 키</td>
      <td>TTL이 중요한 시간 기반 캐시</td>
    </tr>
  </tbody>
</table>

<p>눈 여겨 볼 만한 설정값은<code class="language-plaintext highlighter-rouge">cluster-announce-ip</code> 인데,</p>

<p>Redis 클러스터는 클라이언트가 연결할 때, 노드 간에 데이터 슬롯을 분배하고 <strong>어떤 노드에 특정 키가 있는지</strong>를 알려준다.</p>

<p>즉 <code class="language-plaintext highlighter-rouge">cluster-announce-ip</code>는 노드가 클라이언트에게 자신을 알릴 때 사용하는 <strong>외부에 노출되는 IP 주소</strong></p>

<h3 id="만약-노드가-데이터를-가지고-있지-않다면">만약 노드가 데이터를 가지고 있지 않다면,</h3>

<ol>
  <li>Docker 컨테이너 내부의 서버는 <strong>B의 Redis 노드</strong>에 접속 후 <strong>슬롯 이동 명령을 받는다</strong>.</li>
  <li>Redis 클러스터가 기본적으로 <strong><code class="language-plaintext highlighter-rouge">bind</code></strong><strong>된 내부 IP 주소</strong>를 클라이언트에 알려준다.</li>
  <li>만약 레디스가 <code class="language-plaintext highlighter-rouge">cluster-announce-ip</code>를 설정하지 않았다면, 레디스 노드는 Docker 컨테이너에게 <strong>내부 IP(예: 127.0.0.1 또는 172.x.x.x)</strong>를 반환할 수 있다.</li>
  <li>Docker 컨테이너는 외부 네트워크에서 해당 <strong>내부 IP</strong>로 접근할 수 없기 때문에 연결이 끊어진다.</li>
</ol>

<p>위와 같은 과정으로 레디스 연결이 원활하게 되지 않을 수 있다.</p>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Liboo.blog</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section>
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/_%EC%84%9C%EB%B2%84%EB%A5%BC_docker_swarm_%EC%9C%BC%EB%A1%9C_%EA%B4%80%EB%A6%AC%ED%95%B4%EB%B3%B4%EC%9E%90">
                <div class="post-card-image" style="background-image: url(/upload/2024-12-04-🐬_서버를_docker_swarm_으로_관리해보자.md/0.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/_%EC%84%9C%EB%B2%84%EB%A5%BC_docker_swarm_%EC%9C%BC%EB%A1%9C_%EA%B4%80%EB%A6%AC%ED%95%B4%EB%B3%B4%EC%9E%90">
                <header class="post-card-header">
                    

                    <h2 class="post-card-title">🐬 서버를 docker swarm 으로 관리해보자</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>기존 서버 운영 방식

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://blog.liboo.kr/">
            
                <img src="/assets/images/favicon.png" alt="Liboo.blog icon" />
            
            <span>Liboo.blog</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">[DB] 데이터베이스 마이그레이션 및 클러스터 설정 </div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=%5BDB%5D+%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4+%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98+%EB%B0%8F+%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0+%EC%84%A4%EC%A0%95+&amp;url=https://jekyllt.github.io/jasper2/DB-_%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98_%EB%B0%8F_%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0_%EC%84%A4%EC%A0%95_"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://jekyllt.github.io/jasper2/DB-_%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98_%EB%B0%8F_%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0_%EC%84%A4%EC%A0%95_"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://blog.liboo.kr/">Liboo.blog</a> &copy; 2025</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    <a href="https://facebook.com/ghost" target="_blank" rel="noopener">Facebook</a>
                    <a href="https://twitter.com/tryghost" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                    <img class="subscribe-overlay-logo" src="/assets/images/blog-icon.png" alt="Liboo.blog" />
                
                <h1 class="subscribe-overlay-title">Subscribe to Liboo.blog</h1>
                <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
                <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
